import React from "react";
import { Card } from "@/components/ui/card";
import { BookOpen, MapPin } from "lucide-react";
import { Progress } from "@/components/ui/progress";

const SURAHS = [
  { number: 1, name: "Al-Fatiha", arabic: "Ø§Ù„ÙØ§ØªØ­Ø©", verses: 7, revelation: "Mecque" },
  { number: 2, name: "Al-Baqara", arabic: "Ø§Ù„Ø¨Ù‚Ø±Ø©", verses: 286, revelation: "MÃ©dine" },
  { number: 3, name: "Ali 'Imran", arabic: "Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†", verses: 200, revelation: "MÃ©dine" },
  { number: 4, name: "An-Nisa", arabic: "Ø§Ù„Ù†Ø³Ø§Ø¡", verses: 176, revelation: "MÃ©dine" },
  { number: 5, name: "Al-Ma'ida", arabic: "Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©", verses: 120, revelation: "MÃ©dine" },
  { number: 6, name: "Al-An'am", arabic: "Ø§Ù„Ø£Ù†Ø¹Ø§Ù…", verses: 165, revelation: "Mecque" },
  { number: 7, name: "Al-A'raf", arabic: "Ø§Ù„Ø£Ø¹Ø±Ø§Ù", verses: 206, revelation: "Mecque" },
  { number: 8, name: "Al-Anfal", arabic: "Ø§Ù„Ø£Ù†ÙØ§Ù„", verses: 75, revelation: "MÃ©dine" },
  { number: 9, name: "At-Tawba", arabic: "Ø§Ù„ØªÙˆØ¨Ø©", verses: 129, revelation: "MÃ©dine" },
  { number: 10, name: "Yunus", arabic: "ÙŠÙˆÙ†Ø³", verses: 109, revelation: "Mecque" },
  { number: 11, name: "Hud", arabic: "Ù‡ÙˆØ¯", verses: 123, revelation: "Mecque" },
  { number: 12, name: "Yusuf", arabic: "ÙŠÙˆØ³Ù", verses: 111, revelation: "Mecque" },
  { number: 13, name: "Ar-Ra'd", arabic: "Ø§Ù„Ø±Ø¹Ø¯", verses: 43, revelation: "MÃ©dine" },
  { number: 14, name: "Ibrahim", arabic: "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ…", verses: 52, revelation: "Mecque" },
  { number: 15, name: "Al-Hijr", arabic: "Ø§Ù„Ø­Ø¬Ø±", verses: 99, revelation: "Mecque" },
  { number: 16, name: "An-Nahl", arabic: "Ø§Ù„Ù†Ø­Ù„", verses: 128, revelation: "Mecque" },
  { number: 17, name: "Al-Isra", arabic: "Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡", verses: 111, revelation: "Mecque" },
  { number: 18, name: "Al-Kahf", arabic: "Ø§Ù„ÙƒÙ‡Ù", verses: 110, revelation: "Mecque" },
  { number: 19, name: "Maryam", arabic: "Ù…Ø±ÙŠÙ…", verses: 98, revelation: "Mecque" },
  { number: 20, name: "Ta-Ha", arabic: "Ø·Ù‡", verses: 135, revelation: "Mecque" },
  { number: 21, name: "Al-Anbiya", arabic: "Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡", verses: 112, revelation: "Mecque" },
  { number: 22, name: "Al-Hajj", arabic: "Ø§Ù„Ø­Ø¬", verses: 78, revelation: "MÃ©dine" },
  { number: 23, name: "Al-Mu'minun", arabic: "Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†", verses: 118, revelation: "Mecque" },
  { number: 24, name: "An-Nur", arabic: "Ø§Ù„Ù†ÙˆØ±", verses: 64, revelation: "MÃ©dine" },
  { number: 25, name: "Al-Furqan", arabic: "Ø§Ù„ÙØ±Ù‚Ø§Ù†", verses: 77, revelation: "Mecque" },
  { number: 26, name: "Ash-Shu'ara", arabic: "Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡", verses: 227, revelation: "Mecque" },
  { number: 27, name: "An-Naml", arabic: "Ø§Ù„Ù†Ù…Ù„", verses: 93, revelation: "Mecque" },
  { number: 28, name: "Al-Qasas", arabic: "Ø§Ù„Ù‚ØµØµ", verses: 88, revelation: "Mecque" },
  { number: 29, name: "Al-'Ankabut", arabic: "Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª", verses: 69, revelation: "Mecque" },
  { number: 30, name: "Ar-Rum", arabic: "Ø§Ù„Ø±ÙˆÙ…", verses: 60, revelation: "Mecque" },
  { number: 31, name: "Luqman", arabic: "Ù„Ù‚Ù…Ø§Ù†", verses: 34, revelation: "Mecque" },
  { number: 32, name: "As-Sajda", arabic: "Ø§Ù„Ø³Ø¬Ø¯Ø©", verses: 30, revelation: "Mecque" },
  { number: 33, name: "Al-Ahzab", arabic: "Ø§Ù„Ø£Ø­Ø²Ø§Ø¨", verses: 73, revelation: "MÃ©dine" },
  { number: 34, name: "Saba", arabic: "Ø³Ø¨Ø¥", verses: 54, revelation: "Mecque" },
  { number: 35, name: "Fatir", arabic: "ÙØ§Ø·Ø±", verses: 45, revelation: "Mecque" },
  { number: 36, name: "Ya-Sin", arabic: "ÙŠØ³", verses: 83, revelation: "Mecque" },
  { number: 37, name: "As-Saffat", arabic: "Ø§Ù„ØµØ§ÙØ§Øª", verses: 182, revelation: "Mecque" },
  { number: 38, name: "Sad", arabic: "Øµ", verses: 88, revelation: "Mecque" },
  { number: 39, name: "Az-Zumar", arabic: "Ø§Ù„Ø²Ù…Ø±", verses: 75, revelation: "Mecque" },
  { number: 40, name: "Ghafir", arabic: "ØºØ§ÙØ±", verses: 85, revelation: "Mecque" },
  { number: 41, name: "Fussilat", arabic: "ÙØµÙ„Øª", verses: 54, revelation: "Mecque" },
  { number: 42, name: "Ash-Shura", arabic: "Ø§Ù„Ø´ÙˆØ±Ù‰", verses: 53, revelation: "Mecque" },
  { number: 43, name: "Az-Zukhruf", arabic: "Ø§Ù„Ø²Ø®Ø±Ù", verses: 89, revelation: "Mecque" },
  { number: 44, name: "Ad-Dukhan", arabic: "Ø§Ù„Ø¯Ø®Ø§Ù†", verses: 59, revelation: "Mecque" },
  { number: 45, name: "Al-Jathiya", arabic: "Ø§Ù„Ø¬Ø§Ø«ÙŠØ©", verses: 37, revelation: "Mecque" },
  { number: 46, name: "Al-Ahqaf", arabic: "Ø§Ù„Ø£Ø­Ù‚Ø§Ù", verses: 35, revelation: "Mecque" },
  { number: 47, name: "Muhammad", arabic: "Ù…Ø­Ù…Ø¯", verses: 38, revelation: "MÃ©dine" },
  { number: 48, name: "Al-Fath", arabic: "Ø§Ù„ÙØªØ­", verses: 29, revelation: "MÃ©dine" },
  { number: 49, name: "Al-Hujurat", arabic: "Ø§Ù„Ø­Ø¬Ø±Ø§Øª", verses: 18, revelation: "MÃ©dine" },
  { number: 50, name: "Qaf", arabic: "Ù‚", verses: 45, revelation: "Mecque" },
  { number: 51, name: "Adh-Dhariyat", arabic: "Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª", verses: 60, revelation: "Mecque" },
  { number: 52, name: "At-Tur", arabic: "Ø§Ù„Ø·ÙˆØ±", verses: 49, revelation: "Mecque" },
  { number: 53, name: "An-Najm", arabic: "Ø§Ù„Ù†Ø¬Ù…", verses: 62, revelation: "Mecque" },
  { number: 54, name: "Al-Qamar", arabic: "Ø§Ù„Ù‚Ù…Ø±", verses: 55, revelation: "Mecque" },
  { number: 55, name: "Ar-Rahman", arabic: "Ø§Ù„Ø±Ø­Ù…Ù†", verses: 78, revelation: "MÃ©dine" },
  { number: 56, name: "Al-Waqi'a", arabic: "Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©", verses: 96, revelation: "Mecque" },
  { number: 57, name: "Al-Hadid", arabic: "Ø§Ù„Ø­Ø¯ÙŠØ¯", verses: 29, revelation: "MÃ©dine" },
  { number: 58, name: "Al-Mujadila", arabic: "Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©", verses: 22, revelation: "MÃ©dine" },
  { number: 59, name: "Al-Hashr", arabic: "Ø§Ù„Ø­Ø´Ø±", verses: 24, revelation: "MÃ©dine" },
  { number: 60, name: "Al-Mumtahana", arabic: "Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©", verses: 13, revelation: "MÃ©dine" },
  { number: 61, name: "As-Saff", arabic: "Ø§Ù„ØµÙ", verses: 14, revelation: "MÃ©dine" },
  { number: 62, name: "Al-Jumu'a", arabic: "Ø§Ù„Ø¬Ù…Ø¹Ø©", verses: 11, revelation: "MÃ©dine" },
  { number: 63, name: "Al-Munafiqun", arabic: "Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†", verses: 11, revelation: "MÃ©dine" },
  { number: 64, name: "At-Taghabun", arabic: "Ø§Ù„ØªØºØ§Ø¨Ù†", verses: 18, revelation: "MÃ©dine" },
  { number: 65, name: "At-Talaq", arabic: "Ø§Ù„Ø·Ù„Ø§Ù‚", verses: 12, revelation: "MÃ©dine" },
  { number: 66, name: "At-Tahrim", arabic: "Ø§Ù„ØªØ­Ø±ÙŠÙ…", verses: 12, revelation: "MÃ©dine" },
  { number: 67, name: "Al-Mulk", arabic: "Ø§Ù„Ù…Ù„Ùƒ", verses: 30, revelation: "Mecque" },
  { number: 68, name: "Al-Qalam", arabic: "Ø§Ù„Ù‚Ù„Ù…", verses: 52, revelation: "Mecque" },
  { number: 69, name: "Al-Haqqa", arabic: "Ø§Ù„Ø­Ø§Ù‚Ø©", verses: 52, revelation: "Mecque" },
  { number: 70, name: "Al-Ma'arij", arabic: "Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬", verses: 44, revelation: "Mecque" },
  { number: 71, name: "Nuh", arabic: "Ù†ÙˆØ­", verses: 28, revelation: "Mecque" },
  { number: 72, name: "Al-Jinn", arabic: "Ø§Ù„Ø¬Ù†", verses: 28, revelation: "Mecque" },
  { number: 73, name: "Al-Muzzammil", arabic: "Ø§Ù„Ù…Ø²Ù…Ù„", verses: 20, revelation: "Mecque" },
  { number: 74, name: "Al-Muddaththir", arabic: "Ø§Ù„Ù…Ø¯Ø«Ø±", verses: 56, revelation: "Mecque" },
  { number: 75, name: "Al-Qiyama", arabic: "Ø§Ù„Ù‚ÙŠØ§Ù…Ø©", verses: 40, revelation: "Mecque" },
  { number: 76, name: "Al-Insan", arabic: "Ø§Ù„Ø§Ù†Ø³Ø§Ù†", verses: 31, revelation: "MÃ©dine" },
  { number: 77, name: "Al-Mursalat", arabic: "Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª", verses: 50, revelation: "Mecque" },
  { number: 78, name: "An-Naba", arabic: "Ø§Ù„Ù†Ø¨Ø¥", verses: 40, revelation: "Mecque" },
  { number: 79, name: "An-Nazi'at", arabic: "Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª", verses: 46, revelation: "Mecque" },
  { number: 80, name: "'Abasa", arabic: "Ø¹Ø¨Ø³", verses: 42, revelation: "Mecque" },
  { number: 81, name: "At-Takwir", arabic: "Ø§Ù„ØªÙƒÙˆÙŠØ±", verses: 29, revelation: "Mecque" },
  { number: 82, name: "Al-Infitar", arabic: "Ø§Ù„Ø¥Ù†ÙØ·Ø§Ø±", verses: 19, revelation: "Mecque" },
  { number: 83, name: "Al-Mutaffifin", arabic: "Ø§Ù„Ù…Ø·ÙÙÙŠÙ†", verses: 36, revelation: "Mecque" },
  { number: 84, name: "Al-Inshiqaq", arabic: "Ø§Ù„Ø¥Ù†Ø´Ù‚Ø§Ù‚", verses: 25, revelation: "Mecque" },
  { number: 85, name: "Al-Buruj", arabic: "Ø§Ù„Ø¨Ø±ÙˆØ¬", verses: 22, revelation: "Mecque" },
  { number: 86, name: "At-Tariq", arabic: "Ø§Ù„Ø·Ø§Ø±Ù‚", verses: 17, revelation: "Mecque" },
  { number: 87, name: "Al-A'la", arabic: "Ø§Ù„Ø£Ø¹Ù„Ù‰", verses: 19, revelation: "Mecque" },
  { number: 88, name: "Al-Ghashiya", arabic: "Ø§Ù„ØºØ§Ø´ÙŠØ©", verses: 26, revelation: "Mecque" },
  { number: 89, name: "Al-Fajr", arabic: "Ø§Ù„ÙØ¬Ø±", verses: 30, revelation: "Mecque" },
  { number: 90, name: "Al-Balad", arabic: "Ø§Ù„Ø¨Ù„Ø¯", verses: 20, revelation: "Mecque" },
  { number: 91, name: "Ash-Shams", arabic: "Ø§Ù„Ø´Ù…Ø³", verses: 15, revelation: "Mecque" },
  { number: 92, name: "Al-Layl", arabic: "Ø§Ù„Ù„ÙŠÙ„", verses: 21, revelation: "Mecque" },
  { number: 93, name: "Ad-Duha", arabic: "Ø§Ù„Ø¶Ø­Ù‰", verses: 11, revelation: "Mecque" },
  { number: 94, name: "Ash-Sharh", arabic: "Ø§Ù„Ø´Ø±Ø­", verses: 8, revelation: "Mecque" },
  { number: 95, name: "At-Tin", arabic: "Ø§Ù„ØªÙŠÙ†", verses: 8, revelation: "Mecque" },
  { number: 96, name: "Al-'Alaq", arabic: "Ø§Ù„Ø¹Ù„Ù‚", verses: 19, revelation: "Mecque" },
  { number: 97, name: "Al-Qadr", arabic: "Ø§Ù„Ù‚Ø¯Ø±", verses: 5, revelation: "Mecque" },
  { number: 98, name: "Al-Bayyina", arabic: "Ø§Ù„Ø¨ÙŠÙ†Ø©", verses: 8, revelation: "MÃ©dine" },
  { number: 99, name: "Az-Zalzala", arabic: "Ø§Ù„Ø²Ù„Ø²Ù„Ø©", verses: 8, revelation: "MÃ©dine" },
  { number: 100, name: "Al-'Adiyat", arabic: "Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª", verses: 11, revelation: "Mecque" },
  { number: 101, name: "Al-Qari'a", arabic: "Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©", verses: 11, revelation: "Mecque" },
  { number: 102, name: "At-Takathur", arabic: "Ø§Ù„ØªÙƒØ§Ø«Ø±", verses: 8, revelation: "Mecque" },
  { number: 103, name: "Al-'Asr", arabic: "Ø§Ù„Ø¹ØµØ±", verses: 3, revelation: "Mecque" },
  { number: 104, name: "Al-Humaza", arabic: "Ø§Ù„Ù‡Ù…Ø²Ø©", verses: 9, revelation: "Mecque" },
  { number: 105, name: "Al-Fil", arabic: "Ø§Ù„ÙÙŠÙ„", verses: 5, revelation: "Mecque" },
  { number: 106, name: "Quraysh", arabic: "Ù‚Ø±ÙŠØ´", verses: 4, revelation: "Mecque" },
  { number: 107, name: "Al-Ma'un", arabic: "Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†", verses: 7, revelation: "Mecque" },
  { number: 108, name: "Al-Kawthar", arabic: "Ø§Ù„ÙƒÙˆØ«Ø±", verses: 3, revelation: "Mecque" },
  { number: 109, name: "Al-Kafirun", arabic: "Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†", verses: 6, revelation: "Mecque" },
  { number: 110, name: "An-Nasr", arabic: "Ø§Ù„Ù†ØµØ±", verses: 3, revelation: "MÃ©dine" },
  { number: 111, name: "Al-Masad", arabic: "Ø§Ù„Ù…Ø³Ø¯", verses: 5, revelation: "Mecque" },
  { number: 112, name: "Al-Ikhlas", arabic: "Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", verses: 4, revelation: "Mecque" },
  { number: 113, name: "Al-Falaq", arabic: "Ø§Ù„ÙÙ„Ù‚", verses: 5, revelation: "Mecque" },
  { number: 114, name: "An-Nas", arabic: "Ø§Ù„Ù†Ø§Ø³", verses: 6, revelation: "Mecque" },
];

export default function SurahList({ searchQuery, progress, onSelectSurah }) {
  const filteredSurahs = SURAHS.filter(surah => {
    if (!searchQuery) return true;
    const query = searchQuery.toLowerCase();
    return (
      surah.name.toLowerCase().includes(query) ||
      surah.arabic.includes(query) ||
      surah.number.toString().includes(query)
    );
  });

  const getMemorizedCount = (surahNumber) => {
    return progress.filter(
      p => p.surah_number === surahNumber && p.progress_type === 'memorized'
    ).length;
  };

  return (
    <div className="grid gap-3">
      {filteredSurahs.length === 0 ? (
        <div className="text-center py-12">
          <BookOpen className="w-16 h-16 text-gray-300 mx-auto mb-3" />
          <p className="text-gray-500">Aucune sourate trouvÃ©e</p>
        </div>
      ) : (
        filteredSurahs.map((surah) => {
          const memorizedCount = getMemorizedCount(surah.number);
          const memorizedPercentage = (memorizedCount / surah.verses) * 100;

          return (
            <Card
              key={surah.number}
              onClick={() => onSelectSurah(surah)}
              className="p-4 cursor-pointer hover:shadow-lg hover:border-emerald-300 transition-all duration-200 border-2 border-gray-200 bg-white"
            >
              <div className="flex items-center gap-4">
                {/* Number Badge */}
                <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-600 to-emerald-700 flex items-center justify-center text-white font-bold shadow-md flex-shrink-0">
                  {surah.number}
                </div>

                {/* Surah Info */}
                <div className="flex-1 min-w-0">
                  <div className="flex items-start justify-between mb-2">
                    <div className="flex-1">
                      <h3 className="font-bold text-gray-900 text-lg mb-1">
                        {surah.name}
                      </h3>
                      <p className="text-2xl font-arabic text-emerald-700 mb-1">
                        {surah.arabic}
                      </p>
                    </div>
                  </div>

                  <div className="flex items-center gap-4 text-sm text-gray-600 mb-2">
                    <span className="flex items-center gap-1">
                      <BookOpen className="w-4 h-4" />
                      {surah.verses} versets
                    </span>
                    <span className="flex items-center gap-1">
                      <MapPin className="w-4 h-4" />
                      {surah.revelation}
                    </span>
                  </div>

                  {/* Progress Bar */}
                  {memorizedCount > 0 && (
                    <div className="space-y-1">
                      <div className="flex items-center justify-between text-xs">
                        <span className="text-emerald-700 font-semibold">
                          ðŸŽ¯ MÃ©morisÃ© : {memorizedCount}/{surah.verses}
                        </span>
                        <span className="text-emerald-600 font-bold">
                          {Math.round(memorizedPercentage)}%
                        </span>
                      </div>
                      <Progress 
                        value={memorizedPercentage} 
                        className="h-2 bg-emerald-100"
                      />
                    </div>
                  )}
                </div>
              </div>
            </Card>
          );
        })
      )}
    </div>
  );
}
